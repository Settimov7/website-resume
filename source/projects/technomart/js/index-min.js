var buttonWriteUs=document.querySelector(".main_contacts .button"),popupWriteUs=document.querySelector(".write_us"),formWriteUs=popupWriteUs.querySelector(".form_write_us"),closeWriteUs=popupWriteUs.querySelector(".modal_close"),nameField=formWriteUs.querySelector(".form_field[type = text]"),emailField=formWriteUs.querySelector(".form_field[type = email]"),messageField=formWriteUs.querySelector("textarea"),isStorageSupport=!0,storageName="",storageEmail="",buttonMap=document.querySelector(".main_contacts img"),popupMap=document.querySelector(".map"),closeMap=popupMap.querySelector(".modal_close"),buttonsBuy=document.querySelectorAll(".product .buy"),popupCartSucces=document.querySelector(".cart_success"),closeCartSucces=popupCartSucces.querySelector(".modal_close"),cart=document.querySelector(".shopping_cart"),productsCount=0,mainSlider=document.querySelector(".main_slider"),allMainSlides=mainSlider.querySelectorAll(".slide"),buttonNextSlide=mainSlider.querySelector(".button_next"),buttonPreviousSlide=mainSlider.querySelector(".button_back"),sliderNavigationPoints=mainSlider.querySelectorAll(".slider_navigation_point"),currentSlideIndex=0,servicesSlider=document.querySelector(".services_slider"),allservicesSlides=servicesSlider.querySelectorAll(".description_slide"),servicesNavigation=servicesSlider.querySelector(".services_list"),servicesNavigationItems=servicesNavigation.querySelectorAll(".item"),currentServicesSlideIndex=0;try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}buttonWriteUs.addEventListener("click",function(e){e.preventDefault(),popupWriteUs.classList.add("modal_show"),storageName?(nameField.value=storageName,emailField.value=storageEmail,messageField.focus()):nameField.focus()}),closeWriteUs.addEventListener("click",function(e){e.preventDefault(),popupWriteUs.classList.remove("modal_show"),popupWriteUs.classList.remove("modal_error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupWriteUs.classList.contains("modal_show")&&(popupWriteUs.classList.remove("modal_show"),popupWriteUs.classList.remove("modal_error")),popupMap.classList.contains("modal_show")&&popupMap.classList.remove("modal_show"),popupCartSucces.classList.contains("modal_show")&&popupCartSucces.classList.remove("modal_show"))}),formWriteUs.addEventListener("submit",function(e){nameField.value&&emailField.value?isStorageSupport&&(localStorage.setItem("name",nameField.value),localStorage.setItem("email",emailField.value)):(e.preventDefault(),popupWriteUs.classList.remove("modal_error"),popupWriteUs.offsetWidth=popupWriteUs.offsetWidth,popupWriteUs.classList.add("modal_error"))}),buttonMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.add("modal_show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.remove("modal_show")});for(var i=0;i<buttonsBuy.length;i++)buttonBuy=buttonsBuy[i],buttonBuy.addEventListener("click",function(e){e.preventDefault(),popupCartSucces.classList.add("modal_show"),productsCount++,cart.innerHTML="Корзина: "+productsCount,cart.classList.add("active")});function nextSlide(){goToSlide(currentSlideIndex+1)}function previousSlide(){goToSlide(currentSlideIndex-1)}function goToSlide(e){allMainSlides[currentSlideIndex].classList.remove("active"),sliderNavigationPoints[currentSlideIndex].classList.remove("active"),currentSlideIndex=(e+allMainSlides.length)%allMainSlides.length,allMainSlides[currentSlideIndex].classList.add("active"),sliderNavigationPoints[currentSlideIndex].classList.add("active")}closeCartSucces.addEventListener("click",function(e){e.preventDefault(),popupCartSucces.classList.remove("modal_show")}),buttonNextSlide.addEventListener("click",function(e){e.preventDefault(),nextSlide()}),buttonPreviousSlide.addEventListener("click",function(e){e.preventDefault(),previousSlide()});for(i=0;i<sliderNavigationPoints.length;i++)sliderNavigationPoints[i].addEventListener("click",function(e){e.preventDefault(),allMainSlides[currentSlideIndex].classList.remove("active"),sliderNavigationPoints[currentSlideIndex].classList.remove("active"),currentSlideIndex=parseInt(e.target.innerText)-1,allMainSlides[currentSlideIndex].classList.add("active"),sliderNavigationPoints[currentSlideIndex].classList.add("active")});function getItemIndex(e){return Array.prototype.indexOf.call(servicesNavigationItems,e)}for(i=0;i<servicesNavigationItems.length;i++)servicesNavigationItems[i].addEventListener("click",function(e){e.preventDefault();var t=getItemIndex(e.target);allservicesSlides[currentServicesSlideIndex].classList.remove("active"),servicesNavigationItems[currentServicesSlideIndex].classList.remove("current"),allservicesSlides[currentServicesSlideIndex=t].classList.add("active"),servicesNavigationItems[currentServicesSlideIndex].classList.add("current")});